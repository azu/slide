autoscale: true



# Webpagetestã‹ã‚‰å§‹ã‚ã‚‹ç¶™ç¶šçš„<br>ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹æ”¹å–„



----

# è‡ªå·±ç´¹ä»‹

![ã‚¢ã‚¤ã‚³ãƒ³ right](https://github.com/azu.png)

- Name : **azu**
- Twitter : @[azu_re](https://twitter.com/azu_re)
- Website: [Web scratch], [JSer.info]

[Web scratch]: http://efcl.info/ "Web scratch"
[JSer.info]: http://jser.info/ "JSer.info"



---

## ãªãœå¤–éƒ¨ã‹ã‚‰è¨ˆæ¸¬ã™ã‚‹ã®ï¼Ÿ



- æ‰‹å…ƒã®DevToolsã§å›³ã‚‹ã“ã¨ã‚‚ã§ãã‚‹
  - ã—ã‹ã—ãã‚Œã¯**é«˜æ€§èƒ½ãªé–‹ç™ºè€…ç«¯æœ«**ã§**å®‰å®šã—ãŸãƒãƒƒãƒˆãƒ¯ãƒ¼ã‚¯**ã§ã®çµæœã®1ã¤ã«éããªã„
- æ‰‹å…ƒã§å›³ã£ãŸçµæœã‚ˆã‚Šæ‚ªã„çµæœã¨ãªã‚‹äººã‚‚å¤šã„
- å®šæ€§çš„ãªå€¤ã˜ã‚ƒãªã„ã®ã§æ¯”è¼ƒã§ããªã„
- ç¶™ç¶šçš„ã«æ”¹å–„ã™ã‚‹ã«ã¯æ¯”è¼ƒã§ãã‚‹å€¤ãŒå¿…è¦ => ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹è¨ˆæ¸¬

---





## æ”¹å–„ã«ã¯æŒ‡æ¨™ãŒå¿…è¦

---

ç¶™ç¶šçš„ãªå¤‰åŒ–ã‚’ã™ã‚‹ãŸã‚ã«ã¯é€²åŒ–çš„ãªã„ã¨ã„ã‘ãªã„

ãã‚Œã£ã¦

- ãƒ¢ãƒãƒªã‚·ãƒƒã‚¯ã˜ã‚ƒãªã„æ³¥å›£å­ã˜ã‚ƒãªã„
- å°ã•ãå¤‰åŒ–ã—ã¦ã€å°ã•ããƒ‡ãƒ—ãƒ­ã‚¤ã§ãã‚‹
- æŒ‡æ¨™ã‚„æ–¹å‘ã‚’æŒã£ã¦å¤‰åŒ–ã™ã‚‹
    - ãã®å¤‰åŒ–ã¯æ­£ã—ã„å¤‰åŒ–ã§ã‚ã£ãŸã‹ã‚’ç¢ºèªã™ã‚‹ã™ã¹ã‚’æŒã¤
    - ãã‚ŒãŒä»Šå›ã®è¨ˆæ¸¬ã§ã‚‚ã‚ã‚‹

> -- [Building Evolutionary Architectures](http://shop.oreilly.com/product/0636920080237.do)([é€²åŒ–çš„ã‚¢ãƒ¼ã‚­ãƒ†ã‚¯ãƒãƒ£](https://www.oreilly.co.jp/books/9784873118567/))



----



## ã‚·ã‚¹ãƒ†ãƒ ã¯ãƒãƒ©ãƒ³ã‚¹



- ãƒ•ãƒ­ãƒ³ãƒˆãŒé…ã„ã‹ãƒãƒƒã‚¯ã‚¨ãƒ³ãƒ‰ãŒé…ã„ã‹ãƒãƒƒãƒˆãƒ¯ãƒ¼ã‚¯ãŒé…ã„ã‹
- çµå±€ã¯ãƒãƒ©ãƒ³ã‚¹ã®å•é¡Œã«ãªã‚‹
- ã‚·ã‚¹ãƒ†ãƒ ã¯ãã‚Œãã‚Œã®ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆã®è¶³ã—ç®—ã˜ã‚ƒãªãã¦ã€ç›¸äº’ä½œç”¨ã§æˆã‚Šç«‹ã£ã¦ã„ã‚‹
  - ãƒ•ãƒ­ãƒ³ãƒˆãŒé…ã„ã®ã‚’ç›´ã›ã°ã€ãƒãƒƒã‚¯ã‚¨ãƒ³ãƒ‰ã¸ã‚¢ã‚¯ã‚»ã‚¹ãŒå¢—ãˆè² è·ãŒã‹ã‹ã‚‹ã¨ã„ã£ãŸã‚ˆã†ã«
- ãã‚Œãã‚Œã‚’ã¡ã‚ƒã‚“ã¨è¨ˆæ¸¬ã—ã¦ãŠã„ã¦ã€(ã‚ã‚‰ã‚†ã‚‹)ä¿®æ­£ã”ã¨ã«ä½•ãŒå¤‰åŒ–ã—ãŸã®ã‚’è¦‹ã‚‰ã‚Œã‚‹ã‚ˆã†ãªçŠ¶æ…‹ãŒæ­£å¸¸



----



# æ¥µç«¯ãªä¾‹



> CDNã®ã‚¨ãƒƒã‚¸ã‚µãƒ¼ãƒä¸Šã§å‹•çš„ã«ãƒšãƒ¼ã‚¸ã‚’ç”Ÿæˆã™ã‚‹ä»•çµ„ã¿ã‚’å°å…¥ã—ã¦ãƒ•ãƒ­ãƒ³ãƒˆéƒ¨åˆ†ã®é«˜é€ŸåŒ–ã‚’è¡Œã£ãŸæ‰€ã€ä»Šã¾ã§Topãƒšãƒ¼ã‚¸ã®é€Ÿåº¦ãŒå¹³å‡15ç§’ãã‚‰ã„ã ã£ãŸã®ãŒ2ã€œ3ç§’ã«ãªã£ã¦ã€ãã®çµæœã€ã‚¢ã‚¯ã‚»ã‚¹æ•°ãŒæ®ºåˆ°ã—ã¡ã‚ƒã£ã¦ã€ãƒãƒƒã‚¯ã‚¨ãƒ³ãƒ‰ã®ã‚·ã‚¹ãƒ†ãƒ ãŒæŒãŸãªããªã£ã¡ã‚ƒã£ãŸã€ãªã‚“ã¦ã“ã¨ã‚‚ã‚ã‚Šã¾ã—ãŸã€‚ãã®æ™‚ã¯ã€ãƒãƒƒã‚¯ã‚¨ãƒ³ãƒ‰ã®ä¿®æ­£ã‚³ã‚¹ãƒˆãŒé¦¬é¹¿ã«ãªã‚‰ãªã‹ã£ãŸã®ã§ã€æ³£ãæ³£ãå…ƒã«æˆ»ã—ã¾ã—ãŸã‘ã©ã‚‚ï¼ˆç¬‘ï¼‰ã€‚
>
> -- [UXã¨Webãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹ã€ãã®ã®ã£ã´ããªã‚‰ãªã„é–¢ä¿‚ â€“ ç«¹æ´é™½ä¸€éƒãƒ­ãƒ³ã‚°ã‚¤ãƒ³ã‚¿ãƒ“ãƒ¥ãƒ¼ | HTML5Experts.jp](https://html5experts.jp/shumpei-shiraishi/11599/)



----



## æ¥µç«¯ãªä¾‹



- ãƒ•ãƒ­ãƒ³ãƒˆå´ã ã‘ã‚’ã„ãã‚‰æ—©ãã—ã¦ã‚‚ãƒãƒƒã‚¯ã‚¨ãƒ³ãƒ‰å´ãŒé…ã„ã¨ãƒ€ãƒ¡(é€†ã‚‚åŒã˜)
- ã—ã‹ã—ã€ãƒãƒƒã‚¯ã‚¨ãƒ³ãƒ‰ã®å½¹å‰²ã®ã»ã¨ã‚“ã©ã¯ãƒªã‚½ãƒ¼ã‚¹é…ä¿¡
  - ãƒ•ãƒ­ãƒ³ãƒˆå´ã®æ–¹ãŒãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹ã«é–¢ã‚ã‚‹è¦å› ãŒå¤šã„
  - ç‰¹ã«SPAãªã©ã®JavaScriptã§UIã‚’ä½œã‚‹ã‚ˆã†ãªä»•çµ„ã¿ã¨ãªã£ã¦ã„ã‚‹ã‚µã‚¤ãƒˆã¯ãƒ•ãƒ­ãƒ³ãƒˆå´ã®æ¯”ç‡ãŒé«˜ããªã‚‹å‚¾å‘
- ã‚¦ã‚§ãƒ–ã‚µã‚¤ãƒˆã®ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹ã®8-9å‰²ãã‚‰ã„ã¯ãƒ•ãƒ­ãƒ³ãƒˆå´ã®å‡¦ç†ã®å•é¡Œ



-----



# ã‚¦ã‚§ãƒ–ã‚µã‚¤ãƒˆã®ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹ã®8-9å‰²ãã‚‰ã„ã¯ãƒ•ãƒ­ãƒ³ãƒˆå´ã®å‡¦ç†ã®å•é¡Œ



![right, fit, golden-waterfall.png](./img/golden-waterfall.png)



> 80-90% of the end-user response time is spent on the frontend. 
> Start there. [^note]
>
> -- [the Performance Golden Rule | High Performance Web Sites](http://www.stevesouders.com/blog/2012/02/10/the-performance-golden-rule/)



[^note]: ã“ã®åˆ†é¡ã¯ãƒ•ãƒ­ãƒ³ãƒˆã‚¨ãƒ³ãƒ‰ãŒã‚³ãƒ³ãƒˆãƒ­ãƒ¼ãƒ«ã§ãã‚‹é ˜åŸŸãŒ80-90%ã¨ã„ã†æ„å‘³

-----



# ãƒãƒƒãƒˆãƒ¯ãƒ¼ã‚¯/ãƒãƒƒã‚¯ã‚¨ãƒ³ãƒ‰/ãƒ•ãƒ­ãƒ³ãƒˆã‚¨ãƒ³ãƒ‰

![inline, fit left](./img/catchpoint-waterfall.png)



![fit, right, img](./img/MetricClassification.png)



> -- [Front-end vs Back-end vs Network Performance | Web Performance](http://blog.catchpoint.com/2016/11/03/naming-conventions/)



----



## æŒ‡æ¨™ã¯ç›®çš„ã§ç•°ãªã‚‹

- ãƒšãƒ¼ã‚¸ã®è¡¨ç¤ºé€Ÿåº¦ã‚’æ”¹å–„ã—ãŸã„(ãƒšãƒ¼ã‚¸ãƒ­ãƒ¼ãƒ‰)
    - URLã«ã‚¢ã‚¯ã‚»ã‚¹ã—ã¦ã‹ã‚‰ã§ãã‚‹ã ã‘ã‚³ãƒ³ãƒ†ãƒ³ãƒ„ã‚’æ—©ãè¡¨ç¤ºã—ãŸã„
    - URLã«ã‚¢ã‚¯ã‚»ã‚¹ã—ã¦ã‹ã‚‰ã§ãã‚‹ã ã‘æ—©ãã‚³ãƒ³ãƒ†ãƒ³ãƒ„ã‚’æ“ä½œã§ãã‚‹ã‚ˆã†ã«ã—ãŸã„
- å‹•ä½œã‚’é«˜é€Ÿã«ã—ãŸã„(ãƒ©ãƒ³ã‚¿ã‚¤ãƒ )
    - é‡ãŸã„æ“ä½œãŒã‚ã‚‹ã®ã‚’è»½ãã—ãŸã„
    - ã‚«ã‚¯ã‚«ã‚¯ã™ã‚‹
    - ãƒ¬ã‚¹ãƒãƒ³ã‚¹ã®ã„ã„æ¤œç´¢ã€ãƒ¡ãƒ‹ãƒ¥ãƒ¼ãŒã™ãåˆ‡ã‚Šæ›¿ã‚ã‚‹ã€ãƒšãƒ¼ã‚¸ç§»å‹•ãŒæ—©ã„
- å®‰å®šã—ãŸå‹•ä½œã‚’ã—ã¦ã»ã—ã„
    - ã‚¹ãƒˆãƒªãƒ¼ãƒŸãƒ³ã‚°å†ç”ŸãŒå®‰å®šã—ã¦è¡Œãˆã‚‹
    - ã„ããªã‚Šã‚¯ãƒ©ãƒƒã‚·ãƒ¥ã—ãªã„ã§
- ãƒ¢ãƒã‚¤ãƒ«ã§ã‚‚å‹•ä½œãŒå®‰å®šã—ã¦ã»ã—ã„
    - ãƒãƒƒãƒˆãƒ¯ãƒ¼ã‚¯å¸¯åŸŸã«æ°—ã‚’é…ã‚‹

-----

- ä»Šå›ã®ä¾‹
    - ãƒšãƒ¼ã‚¸ã®è¡¨ç¤ºé€Ÿåº¦ã‚’æ”¹å–„ã—ãŸã„

## ç›®çš„ã§å–ã‚‹æ„å‘³ã‚‚ç•°ãªã‚‹

- é€Ÿåº¦æ”¹å–„ã—ãŸã„(èƒ½å‹•çš„)
  - æ”¹å–„ã—ãŸçµæœã‚’çµ±è¨ˆçš„ã«å¯è¦–åŒ–ã—ãŸã„
- ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹è½ã¨ã—ãŸããªã„(å—å‹•çš„)
  - æ­»æ´»ç›£è¦–ã¿ãŸã„ãªã‚‚ã®



-----

# è¨ˆæ¸¬ã™ã‚‹æŒ‡æ¨™

- FFFB
- LoadTim
- First Content Paint

----

## Onload is not è¡¨ç¤ºé€Ÿåº¦

----

# åˆæˆãƒ¢ãƒ‹ã‚¿ãƒªãƒ³ã‚¯ã‚™ã¨ãƒªã‚¢ãƒ«ãƒ¦ãƒ¼ã‚¶ãƒ¼ãƒ¢ãƒ‹ã‚¿ãƒªãƒ³ã‚°

- åˆæˆãƒ¢ãƒ‹ã‚¿ãƒªãƒ³ã‚¯ã‚™(Synthetic Monitoring)
    - è¨ˆæ¸¬ç”¨ã®ä»®æƒ³ç’°å¢ƒãªã¨ã‚™ã‹ã‚‰ã€åŒã—ã‚™æ¡ä»¶ã¦ã‚™å®šæœŸçš„ã«ç¹°ã‚Šè¿”ã—è¨ˆæ¸¬
    - ç’°å¢ƒãŒåŒã˜æ¡ä»¶ãªã‚‰è¨ˆæ¸¬çµæœã®ã‚†ã‚‰ããŒå°‘ãªã„
- ãƒªã‚¢ãƒ«ãƒ¦ãƒ¼ã‚¶ãƒ¼ãƒ¢ãƒ‹ã‚¿ãƒªãƒ³ã‚°(RUM)
    - ãƒ¦ãƒ¼ã‚¶ãƒ¼ãŒãƒšãƒ¼ã‚¸ã‚’é–‹ã„ãŸã¨ãã«è¨˜éŒ²ã‚’å–ã£ã¦ãƒ­ã‚°ã¨ã—ã¦é€ã‚‹
    - ãƒ¦ãƒ¼ã‚¶ãƒ¼ç’°å¢ƒã¯ãƒãƒ©ãƒãƒ©ãªã®ã§è¨ˆæ¸¬çµæœã®ã‚†ã‚‰ãã¯å¤§ãã„
    - ä¸€æ–¹ã§ãƒªã‚¢ãƒ«ãªãƒ‡ãƒ¼ã‚¿ãªã®ã§ã€KPIã¨å€¤ã‚’çµ„ã¿åˆã‚ã›ã¦åˆ†æã¨ã„ã£ãŸç”¨é€”ã«ä½¿ãˆã‚‹

----

# è¡¨ç¤ºé€Ÿåº¦ã¨æŒ‡æ¨™

- è¡¨ç¤ºé€Ÿåº¦ã‚’æ”¹å–„ã—ãŸã„ã®ã§ã€æŒ‡æ¨™ã¯åˆæˆãƒ¢ãƒ‹ã‚¿ãƒªãƒ³ã‚¯ã‚™ã§é›†ã‚ã‚‹
- åˆæˆãƒ¢ãƒ‹ã‚¿ãƒªãƒ³ã‚¯ã‚™ãªã‚‰åŒã˜ç’°å¢ƒã§ç¶™ç¶šçš„ã«è¨ˆæ¸¬ã§ãã‚‹
- => å€¤åŒå£«ã‚’æ¯”è¼ƒã—ã¦å·®åˆ†ã‚’è¦‹ã‚‰ã‚Œã‚‹
- => æ”¹å–„ã¯ç›¸å¯¾ã§è¦‹ãŸã»ã†ãŒã‚ã‹ã‚Šã‚„ã™ã„(ãƒ¢ãƒ‹ã‚¿ãƒªãƒ³ã‚°ãªã®ã§é€šçŸ¥ã¨ã‹ã§ãã‚‹)

----

# åˆæˆãƒ¢ãƒ‹ã‚¿ãƒªãƒ³ã‚¯ã‚™ã‚’è¡Œãˆã‚‹ã‚µãƒ¼ãƒ“ã‚¹

> Priceã¯2018å¹´8æœˆæ™‚ã®å‚è€ƒå€¤ã€ãƒ—ãƒ©ãƒ³ã«ã‚ˆã‚ŠPriceã¯ç•°ãªã‚Šã¾ã™ã€‚

- [WebPagetest](https://www.webpagetest.org/)(ç„¡æ–™ - åˆ¶é™200ãƒã‚§ãƒƒã‚¯/day)
    - OSSãªã®ã§Self Hoistingã‚‚ã§ãã‚‹
- [SpeedCurve](https://speedcurve.com)(æœ‰æ–™ - $20+/month)
- [Calibre](https://calibreapp.com/)(æœ‰æ–™ â€“ $29+/month)
- [New Relic Synthetics](https://newrelic.com/products/synthetics)(æœ‰æ–™ â€“ $69/month)
- [CatchPoint](https://www.catchpoint.com/)(æœ‰æ–™ â€“ $899/month)

----

## ã‚µãƒ¼ãƒ“ã‚¹ã«ã‚ˆã£ã¦è¨ˆæ¸¬ã§ãã‚‹ã‚‚ã®ã¯é•ã†

- ã‚µãƒ¼ãƒ“ã‚¹ã«ã‚ˆã£ã¦è¨ˆæ¸¬ã™ã‚‹å¯¾è±¡ã€ä»•æ–¹ãŒé•ã†ã®ã§æ¯”è¼ƒã¯ã—ã«ãã„
- [WebPagetest](https://www.webpagetest.org/)ã¯è¨ˆæ¸¬ã™ã‚‹ã ã‘ã§ç¶™ç¶šçš„ã«å¤‰åŒ–ã‚’è¦‹ã‚‹ãƒ€ãƒƒã‚·ãƒ¥ãƒœãƒ¼ãƒ‰ã¯ãªã„
  - è¨ˆæ¸¬ã—ãŸãƒ‡ãƒ¼ã‚¿ã¯1ãƒ¶æœˆã ã‘ä¿æŒã•ã‚Œã‚‹
- [SpeedCurve](https://speedcurve.com)ã€[Calibre](https://calibreapp.com/)ã¯è¨ˆæ¸¬ + ãƒ€ãƒƒã‚·ãƒ¥ãƒœãƒ¼ãƒ‰ + é€šçŸ¥ãªã©
  - è¨ˆæ¸¬ã¯å¤§ä½“AWS EC2ã®ãƒªãƒ¼ã‚¸ãƒ§ãƒ³/ãƒã‚·ãƒ³
  - <https://www.webpagetest.org/getLocations.php?f=html&k=A>
  - <http://support.speedcurve.com/synthetic-settings/test-agent-locationsregions>
  - <https://calibreapp.com/docs/site/agent-locations>
- CatchPointã¯ISPã¨ã‹ãƒãƒƒãƒˆãƒ¯ãƒ¼ã‚¯ã®çµŒè·¯ã‚‚ç´°ã‹ã„ = ã‚°ãƒ­ãƒ¼ãƒãƒ«ã‚µãƒ¼ãƒ“ã‚¹å‘ã‘
  - [Synthetic Monitoring ã‚’æ´»ç”¨ã—ãŸã‚°ãƒ­ãƒ¼ãƒãƒ«ã‚µãƒ¼ãƒ“ã‚¹ã®ãƒãƒƒãƒˆãƒ¯ãƒ¼ã‚¯ãƒ¬ã‚¤ãƒ†ãƒ³ã‚·ã®æ¸¬å®šã¨æ”¹å–„ - ã‚¯ãƒƒã‚¯ãƒ‘ãƒƒãƒ‰é–‹ç™ºè€…ãƒ–ãƒ­ã‚°](https://techlife.cookpad.com/entry/2017/09/21/080000)



-----



# WebPagetest



- [WebPagetest](https://www.webpagetest.org/)è‡ªä½“ã«ã¯ãƒ€ãƒƒã‚·ãƒ¥ãƒœãƒ¼ãƒ‰(å¯è¦–åŒ–ã‚„ãƒ‡ãƒ¼ã‚¿ã‚’ä¿å­˜ã™ã‚‹ä»•çµ„ã¿ãŒã‚ã‚‹ã‚ã‘ãªã„)
- gas-webpagetestã§ç„¡æ–™ã§çµæœã‚’ãŸã‚ã¦ã€Google DataStudioã§å¯è¦–åŒ–ã—ã‚ˆã†



----

# è¨ˆæ¸¬ã—ã¦ã©ã†ã™ã‚‹?

----



# æ”¹å–„è¾º



----



# æ”¹å–„ã™ã‚‹ãŸã‚ã«è¨ˆæ¸¬ã™ã‚‹

- ãŸã å˜ã«è¨ˆæ¸¬ã—ãŸãƒ‡ãƒ¼ã‚¿ã‚’è²¯ã‚ã¦ã‚‹ã ã‘ã§ã¯ã—ã‚‡ã¼ã„æ­»æ´»ç›£è¦–ã«ã—ã‹ãªã‚‰ãªã„
- è²¯ã‚ãŸãƒ‡ãƒ¼ã‚¿ã¯ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹æ”¹å–„ã®æŒ‡æ¨™ã«ä½¿ãˆã‚‹
- ãƒ€ãƒƒã‚·ãƒ¥ãƒœãƒ¼ãƒ‰ã‹ã‚‰å•é¡Œã‚’è¦‹ã¤ã‘ã‚‹ã“ã¨ã¯é›£ã—ã„
  - Lighthouseã¨ã‹ã‚’ä½¿ã£ãŸã»ã†ãŒå…·ä½“çš„ãªæŒ‡ç¤ºãŒã§ã‚‹
  - ãã®æŒ‡ç¤ºã¨ãƒ‡ãƒ¼ã‚¿ã‚’ç…§ã‚‰ã—åˆã‚ã›ã¦ã¿ã‚‹
- æ¯”è¼ƒå¯¾è±¡ã‚’å¢—ã‚„ã™ã“ã¨ãŒå¤§äº‹
  - ä¼¼ãŸæ©Ÿèƒ½ã‚’æŒã¤ã‚µã‚¤ãƒˆã¨æ¯”è¼ƒã—ã¦ã¿ã‚‹



## å…·ä½“çš„ãªä¾‹

- JSã®moduleå¯¾å¿œ
- CSSã®ãƒ•ã‚¡ã‚¤ãƒ«ã‚µã‚¤ã‚ºãŒæ¥µç«¯ã«å¤§ãã„
- ä¸è¦ãªã‚‚ã®ã‚’èª­ã¿è¾¼ã¾ãªã„
- Lazy Load
    - Code Splitting
- preloadã™ã‚‹

å¤§ä½“ã®æ”¹å–„ã¯ãŸã ã®æ­£å¸¸åŒ–ã§ã‚ã‚‹





------



## ä½•ã‚’æ”¹å–„ã™ã‚‹ã®ã‹ãŒé›£ã—ã„å•é¡Œ



- ãƒ€ãƒƒã‚·ãƒ¥ãƒœãƒ¼ãƒ‰ã§è¦‹ã‚‰ã‚Œã¦ã‚‚ä½•ãŒå•é¡ŒãŒã‚ã‹ã‚‰ãšã«ä½•ã‚‚ã§ããªã„
  - Note: SpeedCurveã¯ã„ã‚ã‚“ãªãƒ’ãƒ³ãƒˆã‚’å‡ºã—ã¦ãã‚Œã‚‹
- é€Ÿãã™ã‚‹ã®ã§ã¯ãªãé…ãã—ãªã„ã“ã¨ã®æ–¹ãŒé‡è¦
  - ãƒœãƒˆãƒ«ãƒãƒƒã‚¯ã‚’å–ã‚Šé™¤ã„ã¦ã„ã => ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹æ”¹å–„
  - ã¨è€ƒãˆãŸã»ã†ãŒè¡Œå‹•ã—ã‚„ã™ã„
- ãƒœãƒˆãƒ«ãƒãƒƒã‚¯ã¯ã„ã‚ã„ã‚ãªãƒ„ãƒ¼ãƒ«ã§è¦‹ã¤ã‘ã‚‰ã‚Œã‚‹
  - [How To Think About Speed Tools Â |Â  Web Fundamentals Â |Â  Google Developers](https://developers.google.com/web/fundamentals/performance/speed-tools/)



------



## ã‚µã‚¤ãƒˆA: æ¯”è¼ƒã—ã¦å•é¡Œã‚’è¦‹ã¤ã‘ã‚‹ä¾‹



- ã¨ã‚Šã‚ãˆãšè¨ˆæ¸¬ã—ã¦ã¨ã‚Šã‚ãˆãšå¯è¦–åŒ–ã—ã¦ã¿ãŸ
- ãƒ€ãƒƒã‚·ãƒ¥ãƒœãƒ¼ãƒ‰ã‚’è¦‹ã¦ã‚‚ã„ã¾ã„ã¡ä½•ãŒå•é¡ŒãŒã‚ã‹ã‚‰ãªã„



----



![fit, site A page load times](img/site-a-page-load-time.png)



----

![fit, site A rendering times](img/site-a-rendering-time.png)



----



![fit, site A content size](img/site-a-content-size.png)

-----



## ã‚µã‚¤ãƒˆA: ä½•ãŒå•é¡ŒåŒ–ã‚’æ¯”è¼ƒã—ã¦è¦‹ã¤ã‘ã‚‹

- æ¯”è¼ƒå¯¾è±¡ãŒã‚ã‚‹ã¨å•é¡ŒãŒè¦‹ã¤ã‘ã‚„ã™ã„



----

# Competitorã¨æ¯”è¼ƒã—ã¦è¨ˆæ¸¬

- WebPagetestã§ã¯ã€çµæœã®`testId`åŒå£«ã‚’æ¯”è¼ƒã§ãã‚‹
- SpeedCurveã§ã¯ã€ç™»éŒ²ã™ã‚‹æ™‚ã«"æ¯”è¼ƒå¯¾è±¡ã®URL"ã‚’å…¥åŠ›ã™ã‚‹



![right](img/speedcurve.png)

-----



## ã‚µã‚¤ãƒˆA: ã‚µã‚¤ãƒˆã‚’æ¯”è¼ƒã—ã¦ã¿ã‚‹ã¨CSSã®ã‚µã‚¤ã‚ºã«å•é¡Œ

ä¸‹è¨˜ã¯gzipã—ãŸCSSã®ãƒ•ã‚¡ã‚¤ãƒ«ã‚µã‚¤ã‚º

- **ã‚µã‚¤ãƒˆA: 230kb** â€“ æ˜ã‚‰ã‹ã«ã§ã‹ã„ï¼
- ã‚µã‚¤ãƒˆX: 20kb
- ã‚µã‚¤ãƒˆY: 33kb
- ã‚µã‚¤ãƒˆZ: 37kb



----





## ä¸€èˆ¬çš„ãªã‚µã‚¤ãƒˆã¨æ¯”è¼ƒã™ã‚‹



- [HTTP Archive](https://httparchive.org/)ã§[Page Weight](https://httparchive.org/reports/page-weight)ã§æœ‰åãªã‚µã‚¤ãƒˆã®HTML, CSS, JSãªã©ã®ãƒ•ã‚¡ã‚¤ãƒ«ã‚µã‚¤ã‚ºã‚’èª¿æŸ»
- CSSã¯**50Kb**å¼±ãŒä¸€èˆ¬çš„ãªã‚µã‚¤ã‚º



![inline, css byte](img/css-bytes.png)





-----



# ã‚µã‚¤ãƒˆA: CSSã®å•é¡Œã‚’åˆ†æã™ã‚‹



- [TestMyCSS](http://www.testmycss.com/)ã¨ã„ã†ã‚µãƒ¼ãƒ“ã‚¹ã§ã¯CSSã«å«ã¾ã‚Œã‚‹Base64ã®ã‚µã‚¤ã‚ºã‚„ã‚»ãƒ¬ã‚¯ã‚¿ã®è¤‡é›‘åº¦ã€é‡è¤‡ã€ç©ºã®ãƒ«ãƒ¼ãƒ«ãªã©ã‚’ä¸€è¦§ã§ãã‚‹
- ã‚µã‚¤ãƒˆAã®CSSã¯Base 64ãŒ**150kb**ãã‚‰ã„ã‚ã‚Šç•°å¸¸ã«å¤§ãã‹ã£ãŸ
- CSSã«ãƒ•ã‚©ãƒ³ãƒˆãŒBase64åŒ–ã—ãŸã‚‚ã®ãŒå«ã¾ã‚Œã¦ã„ãŸ



----



## ã‚µã‚¤ãƒˆA: CSSã‹ã‚‰ãƒ•ã‚©ãƒ³ãƒˆã‚’å–ã‚Šé™¤ã 

- CSSã‹ã‚‰ãƒ•ã‚©ãƒ³ãƒˆã‚’å–ã‚Šé™¤ã„ãŸ: **230kb** -> **80kb**

![inline, CSSã‚µã‚¤ã‚ºã®å¤‰åŒ–](img/site-a-css-size.png)



---



# ä¸€ã¤ã®æ”¹å–„ãŒãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹ã«ä¸ãˆã‚‹å½±éŸ¿ã¯å¤§ãããªã„



- ãƒšãƒ¼ã‚¸ãƒ­ãƒ¼ãƒ‰ã«é–¢ä¿‚ã™ã‚‹æ©Ÿèƒ½ã‚’ä¸€ã¤ã ã‘æ—©ãã—ã¦ã‚‚ã€å…¨ä½“ã¸ã®å½±éŸ¿ã¯å°ã•ã„
- ç¶™ç¶šçš„ã«è¨ˆæ¸¬ã—æ”¹å–„ã‚’ç¶šã‘ã‚‹å¿…è¦ãŒã‚ã‚‹



----



## ä¾‹) ã‚µã‚¤ãƒˆB: SpeedIndexã‚’æŒ‡æ¨™ã«ã¡ã‚‡ã£ã¨ã¥ã¤æ”¹å–„ã—ãŸä¾‹



- ã‚µã‚¤ãƒˆA:  Reactã§ä½œã‚‰ã‚ŒãŸã‚µã‚¤ãƒˆ

- ã‚¯ãƒ©ã‚¤ã‚¢ãƒ³ãƒˆã‚µã‚¤ãƒ‰ãƒ¬ãƒ³ãƒ€ãƒªãƒ³ã‚°ã®ã¿
  - JavaScriptãŒå®Ÿè¡Œã•ã‚Œã‚‹ã¾ã§çœŸã£ç™½ãªã®ã§ãƒ•ã‚¡ã‚¤ãƒ«ã‚µã‚¤ã‚ºã‚’ã¸ã‚‰ã™ã“ã¨ãŒã€ãã®ã¾ã¾è¡¨ç¤ºé€Ÿåº¦ã¸å½±éŸ¿



-----



## æ”¹å–„é …ç›®

- Babel 7 -> ãƒ©ãƒ³ã‚¿ã‚¤ãƒ ã‚³ã‚¹ãƒˆãŒå°ã•ããªã‚‹
- webpack 4 + "module"ãƒ•ã‚£ãƒ¼ãƒ«ãƒ‰ã®å¯¾å¿œ -> TreeShaking/Hoistingã§ã‚µã‚¤ã‚ºã¨ãƒ©ãƒ³ã‚¿ã‚¤ãƒ ã‚³ã‚¹ãƒˆã®æ¸›å°‘
  - `es-lodash`ã®å¯¾å¿œ - Tree Shakingã§æœ€çµ‚çš„ã«ã¯ãƒ•ã‚¡ã‚¤ãƒ«ã‚µã‚¤ã‚ºãŒå°ã•ããªã‚‹
- åˆæœŸè¡¨ç¤ºã«ä¸è¦ãªã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆã‚’é…å»¶ãƒ­ãƒ¼ãƒ‰ -> `import()`ã§å‹•çš„ã«ãƒ­ãƒ¼ãƒ‰ã™ã‚‹
- React 16ã¸ã®ã‚¢ãƒƒãƒ—ãƒ‡ãƒ¼ãƒˆ -> ãƒ•ã‚¡ã‚¤ãƒ«ã‚µã‚¤ã‚ºã®æ¸›å°‘



----



![fit, speed index](img/example-speed-index.png)



----



![fit, file size](img/example-content-size.png)



----



## åŠ‡çš„ãªå¤‰åŒ–ã‚’æœ›ã‚€å ´åˆã¯ã‚¢ãƒ¼ã‚­ãƒ†ã‚¯ãƒãƒ£ã‚‚å¤‰åŒ–ã‚’

- åŠ‡çš„ãªå¤‰åŒ–ã‚’å¾—ã‚‹ã«ã¯å…¨ä½“çš„/æ ¹æœ¬çš„ãªå¤‰åŒ–ãŒå¿…è¦ã«ãªã‚‹
- æ³¥å›£å­ã«ã—ã¦ã„ã‚‹ã¨ã‚¢ãƒ¼ã‚­ãƒ†ã‚¯ãƒãƒ£ã‚’å¤‰æ›´ã™ã‚‹ã“ã¨ãŒé›£ã—ããªã‚‹
  - ã‚·ã‚¹ãƒ†ãƒ ã«æŸ”è»Ÿæ€§ãŒãªã„ã¨ã‚¢ãƒ¼ã‚­ãƒ†ã‚¯ãƒãƒ£ã‚’å¤‰æ›´ã™ã‚‹ã“ã¨ãŒã§ããªã„

ä¾‹) ã‚¯ãƒ©ã‚¤ã‚¢ãƒ³ãƒˆã‚µã‚¤ãƒ‰ãƒ¬ãƒ³ãƒ€ãƒªãƒ³ã‚°(CSR)ã ã‘ã ã£ãŸã®ã‚’ã‚µãƒ¼ãƒã‚µã‚¤ãƒ‰ãƒ¬ãƒ³ãƒ€ãƒªãƒ³ã‚°(SSR)ã‚‚ã™ã‚‹ã‚ˆã†ã«å¤‰æ›´

- [ã‚¤ãƒ³ã‚¿ãƒ¼ãƒãƒƒãƒˆãƒ†ãƒ¬ãƒ“å±€ã€ŒAbemaTVã€ã®è¡¨ç¤ºé€Ÿåº¦ãŒå¾“æ¥æ¯”3å€ã«ã‚¢ãƒƒãƒ— | æ ªå¼ä¼šç¤¾ã‚µã‚¤ãƒãƒ¼ã‚¨ãƒ¼ã‚¸ã‚§ãƒ³ãƒˆ](https://www.cyberagent.co.jp/news/detail/id=21679)
- [AbemaTVã¯ãŸã ã®SSR ã˜ã‚ƒã­ã‡ã‚“ã ã‚ˆ - Speaker Deck](https://speakerdeck.com/ktknest/abematvhatadafalsessr-ziyaneendayo)



----



# CIã§é˜²ã”ã†

- size-limit
- stagingã§ãƒã‚§ãƒƒã‚¯



-----



# ãƒ–ãƒ©ã‚¦ã‚¶ã¨ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹



- WebKitã¯ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹ãƒªã‚°ãƒ¬ãƒƒã‚·ãƒ§ãƒ³ã¯revertã™ã‚‹
  - [Performance Testing | WebKit](https://webkit.org/performance/)
- JavaScriptã‚¨ãƒ³ã‚¸ãƒ³ã®ãƒ™ãƒ³ãƒãƒãƒ¼ã‚¯ã‚’æ¯”è¼ƒã™ã‚‹ã‚µã‚¤ãƒˆã‚’MozillaãŒç®¡ç†ã—ã¦ã„ã‚‹
  - [ARE WE FAST YET?](https://arewefastyet.com/)



---



## FAQ



- Lighthouseã¨ã‹ã§ã¯ãƒ€ãƒ¡ãªã®?
  - WebPagetestã¯Lighthouseã®çµæœã‚‚å«ã‚“ã§ã„ã‚‹
  - ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹æ”¹å–„ã«å¿…è¦ãªã®ã¯é€£ç¶šçš„å€¤
  - ã‚¹ã‚³ã‚¢ã˜ã‚ƒãªãã¦æ™‚é–“ã‚’è¨ˆæ¸¬ã™ã‚‹(ã‚¹ã‚³ã‚¢ã¯ãƒ«ãƒ¼ãƒ«ãŒå¤‰ã‚ã‚‹ã“ã¨ãŒã‚ã‚‹)



-----



# ã¾ã¨ã‚



- æ”¹å–„ã™ã‚‹ãŸã‚ã«è¨ˆæ¸¬

- ç¶™ç¶šçš„ã«æ”¹å–„ã™ã‚‹ãŸã‚ã«ã¯æŒ‡æ¨™ã‚’ã¡ã‚ƒã‚“ã¨æŒã¤

- é€Ÿãã™ã‚‹ã®ã§ã¯ãªãé…ãã—ãªã„

  - ã‚·ã‚¹ãƒ†ãƒ å…¨ä½“ã§è¦‹ã‚Œã°ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹ã¯1å› å­

- åŸºæº–å€¤(Performance Budget)ã‚’æ±ºã‚ã¦ãã“ã‚ˆã‚Šé…ããªã‚‰ãªã„ã“ã¨ã‚’ãƒ™ãƒ¼ã‚¹ãƒ©ã‚¤ãƒ³ã«ã™ã‚‹

  

----



## å‚è€ƒ



- [Webãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹ã¨ãƒ—ãƒ­ãƒ€ã‚¯ãƒˆKPIã®ç›¸é–¢ã‚’å¯è¦–åŒ–ã™ã‚‹è©±](https://developers.cyberagent.co.jp/blog/archives/9540/)
- [Performance/WebPageTest - Wikitech](https://wikitech.wikimedia.org/wiki/Performance/WebPageTest)
- [Using WebPageTestÂ -Â O'Reilly Media](http://shop.oreilly.com/product/0636920033592.do)
- [speedtracker/speedtracker: ğŸ“‰ Visualisation layer and data store for SpeedTracker](https://github.com/speedtracker/speedtracker)
- [Webã‚µã‚¤ãƒˆãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹ç®¡ç†ã®åŸºç¤çŸ¥è­˜](https://www.slideshare.net/takehora/web-59093011)
- [Synthetic vs Real User Monitoring : What to use when? | Tezify Blog](https://www.tezify.com/post/synthetic_vs_rum/)
- [æœ€è¿‘ã® Web ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹æ”¹å–„ã«ã¤ã„ã¦çŸ¥ã£ã¦ãŠããŸã„ã‚³ãƒˆ -HTML5 Conference 2017- - YouTube](https://www.youtube.com/watch?v=gJvOWw-l-gc)